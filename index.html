<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Self-Employed vs Limited Company — 2025/26 (England & Wales)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root {
  --gap: 14px;
  --pad: 16px;
  --radius: 8px;
  --font: "GDS Transport", Arial, sans-serif;
  --bg: #f3f2f1;
  --card-bg: #ffffff;
  --border: #b1b4b6;
  --heading: #0b0c0c;
  --text: #0b0c0c;
  --muted: #505a5f;
  --good: #00703c;
  --danger: #d4351c;
}
* { box-sizing: border-box; }
body {
  font-family: var(--font);
  margin: 0;
  padding: 24px;
  background: var(--bg);
  color: var(--text);
}
h1 { font-size: 1.5rem; margin: 0 0 8px; }
h2, h3 { color: var(--heading); margin-top: 0; }
.hint { margin: 0 0 18px; color: var(--muted); font-size: 0.9rem; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--gap); }
.card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--pad);
}
.inputs { display: grid; grid-template-columns: 1fr 1fr; gap: var(--gap); }
label { display: block; font-size: 0.85rem; color: var(--muted); margin-bottom: 4px; }
input, select {
  width: 100%;
  padding: 8px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  font: inherit;
}
.kpi {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gap);
  margin-top: 10px;
}
.kpi > div {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  text-align: center;
  cursor: pointer;
}
.kpi h3 { margin: 0 0 6px; font-size: 0.85rem; color: var(--muted); font-weight: 500; }
.kpi .val { font-size: 1.2rem; font-weight: 700; }
table { width: 100%; border-collapse: collapse; margin-top: 8px; }
th, td { padding: 6px; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
th { text-align: left; color: var(--muted); font-weight: 600; }
tfoot td { font-weight: 700; }
.danger { color: var(--danger); }
.good { color: var(--good); }
.tiny { font-size: 0.75rem; color: var(--muted); }
@media (max-width: 960px){
  .grid { grid-template-columns: 1fr; }
  .inputs { grid-template-columns: 1fr; }
  .kpi { grid-template-columns: 1fr; }
}
/* Modal */
#modal {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
}
#modalContent {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 20px;
  max-width: 400px;
  width: 90%;
}
#modal h3 { margin-top: 0; }
#modal table { width: 100%; border-collapse: collapse; margin-top: 10px; }
#modal td { padding: 4px 0; }
#modalClose {
  margin-top: 12px;
  padding: 8px 12px;
  border: 1px solid var(--border);
  background: var(--bg);
  cursor: pointer;
}
</style>
</head>
<body>
<h1>Self-Employed vs Limited Company — 2025/26 (England & Wales)</h1>
<p class="hint">Planning tool — not advice. Uses 2025/26 tax rates.</p>

<div class="grid">
  <div class="card">
    <h2>Inputs</h2>
    <div class="inputs">
      <div>
        <label for="profits">Business profits</label>
        <input id="profits" type="number" value="80000">
      </div>
      <div>
        <label for="otherEarned">Other earned income</label>
        <input id="otherEarned" type="number" value="0">
      </div>
      <div>
        <label for="otherDivs">Other dividends</label>
        <input id="otherDivs" type="number" value="0">
      </div>
      <div>
        <label for="assocCos">Associated companies</label>
        <input id="assocCos" type="number" value="0">
      </div>
      <div>
        <label for="months">Months in accounting period</label>
        <input id="months" type="number" value="12">
      </div>
      <div>
        <input id="ea" type="checkbox" checked>
        <label for="ea">Employment Allowance available</label>
      </div>
    </div>
  </div>
  <div class="card">
    <h2>Headline comparison</h2>
    <div class="kpi">
      <div id="kpiSeTax"><h3>Total tax - Self-employed</h3><div class="val" id="seTax">£0</div></div>
      <div id="kpiCoTax"><h3>Total tax - Ltd Co</h3><div class="val" id="coTax">£0</div></div>
      <div><h3>Take-home difference</h3><div class="val" id="diff">£0</div><div class="tiny" id="whichBetter"></div></div>
    </div>
  </div>
</div>
<div class="grid" style="margin-top:14px;">
  <div class="card">
    <h3>Self-employed breakdown</h3>
    <table><tbody id="seRows"></tbody>
    <tfoot><tr><td>Total tax</td><td class="danger" id="seTotalTax">£0</td></tr><tr><td>Take-home</td><td class="good" id="seTakeHome">£0</td></tr></tfoot>
    </table>
  </div>
  <div class="card">
    <h3>Limited company breakdown</h3>
    <table><tbody id="coRows"></tbody>
    <tfoot><tr><td>Total tax</td><td class="danger" id="coTotalTax">£0</td></tr><tr><td>Take-home</td><td class="good" id="coTakeHome">£0</td></tr></tfoot>
    </table>
  </div>
</div>

<!-- Modal -->
<div id="modal"><div id="modalContent">
  <h3 id="modalTitle"></h3>
  <table id="modalTable"></table>
  <button id="modalClose">Close</button>
</div></div>

<script>
function fmtGBP(n){ return "£" + Math.round(n).toLocaleString("en-GB"); }

let breakdowns = {};

function calc(){
  breakdowns = {};
  const profits = +document.getElementById('profits').value;
  const otherEarned = +document.getElementById('otherEarned').value;
  const otherDivs = +document.getElementById('otherDivs').value;
  const assocCos = +document.getElementById('assocCos').value;
  const months = +document.getElementById('months').value;
  const eaAvailable = document.getElementById('ea').checked;

  const PA = 12570, BASIC_BAND = 37700, ADDITIONAL_THRESHOLD = 125140;
  const IT_BASIC = 0.20, IT_HIGHER = 0.40, IT_ADD = 0.45;
  const DIV_ALLOW = 500, DIV_BASIC = 0.0875, DIV_HIGHER = 0.3375, DIV_ADD = 0.3935;
  const C4_LPL = 12570, C4_UPL = 50270, C4_MAIN = 0.06, C4_ADD = 0.02;
  const EE_MAIN = 0.08, EE_ADD = 0.02, ER_ST = 9100, ER_RATE = 0.138, EA_CAP = 5000;
  const CT_SMALL = 0.19, CT_MAIN = 0.25, CT_LOWER = 50000, CT_UPPER = 250000;

  function addBreakdown(key,title,steps){
    breakdowns[key] = {title, steps};
  }

  function taperedPA(ani){
    if (ani <= 100000) return PA;
    if (ani >= 125140) return 0;
    return Math.max(0, PA - Math.floor((ani - 100000)/2));
  }

  function taxOnNSND(total, paAvail, key, title){
    let rem = Math.max(0,total - paAvail);
    let steps = [];
    let b = Math.min(rem, BASIC_BAND);
    if (b>0) steps.push([b, IT_BASIC, b*IT_BASIC]);
    let h = Math.min(Math.max(rem - BASIC_BAND,0), ADDITIONAL_THRESHOLD - (PA+BASIC_BAND));
    if (h>0) steps.push([h, IT_HIGHER, h*IT_HIGHER]);
    let a = Math.max(0, rem - BASIC_BAND - h);
    if (a>0) steps.push([a, IT_ADD, a*IT_ADD]);
    let totalTax = steps.reduce((s,x)=>s+x[2],0);
    addBreakdown(key,title,steps);
    return totalTax;
  }

  function taxOnDivs(totalDivs, nsndAfterPA, key, title){
    if (totalDivs <= 0) { addBreakdown(key,title,[]); return 0; }
    let steps=[];
    let left = totalDivs;
    let allow = Math.min(DIV_ALLOW,left);
    left -= allow;
    if (left <= 0){ addBreakdown(key,title,steps); return 0; }
    let basicLeft = Math.max(0, BASIC_BAND - Math.max(0, nsndAfterPA));
    let atBasic = Math.min(basicLeft,left);
    if (atBasic>0) steps.push([atBasic,DIV_BASIC, atBasic*DIV_BASIC]);
    left -= atBasic;
    let hrWidth = Math.max(0, ADDITIONAL_THRESHOLD - (PA + BASIC_BAND));
    let nsndBeyondBasic = Math.max(0, nsndAfterPA - BASIC_BAND);
    let hrLeft = Math.max(0, hrWidth - nsndBeyondBasic);
    let atHigher = Math.min(hrLeft, left);
    if (atHigher>0) steps.push([atHigher,DIV_HIGHER, atHigher*DIV_HIGHER]);
    left -= atHigher;
    let atAdd = Math.max(0,left);
    if (atAdd>0) steps.push([atAdd,DIV_ADD, atAdd*DIV_ADD]);
    let totalTax = steps.reduce((s,x)=>s+x[2],0);
    addBreakdown(key,title,steps);
    return totalTax;
  }

  function class4NI(profits, key){
    let steps=[];
    let main = Math.min(Math.max(profits - C4_LPL, 0), C4_UPL - C4_LPL);
    if (main>0) steps.push([main,C4_MAIN, main*C4_MAIN]);
    let upper = Math.max(0, profits - C4_UPL);
    if (upper>0) steps.push([upper,C4_ADD, upper*C4_ADD]);
    let total = steps.reduce((s,x)=>s+x[2],0);
    addBreakdown(key,"Class 4 NI",steps);
    return total;
  }

  function eeNI(salary,key){
    let steps=[];
    let main = Math.min(Math.max(salary - PA,0), 50270 - PA);
    if (main>0) steps.push([main,EE_MAIN, main*EE_MAIN]);
    let upper = Math.max(0, salary - 50270);
    if (upper>0) steps.push([upper,EE_ADD, upper*EE_ADD]);
    let total = steps.reduce((s,x)=>s+x[2],0);
    addBreakdown(key,"Employee NI",steps);
    return total;
  }

  function erNI(salary,key){
    let steps=[];
    let above = Math.max(0,salary - ER_ST);
    if (above>0) steps.push([above,ER_RATE, above*ER_RATE]);
    let total = steps.reduce((s,x)=>s+x[2],0);
    addBreakdown(key,"Employer NI",steps);
    return total;
  }

  function corpTax(profits, key){
    let steps=[];
    const lower=CT_LOWER, upper=CT_UPPER;
    if (profits<=0){ addBreakdown(key,"Corporation Tax",[]); return 0; }
    if (profits <= lower){ steps.push([profits, CT_SMALL, profits*CT_SMALL]); }
    else if (profits >= upper){ steps.push([profits, CT_MAIN, profits*CT_MAIN]); }
    else {
      const mainCharge = profits * CT_MAIN;
      const MR = (upper - profits) * (3/200);
      steps.push([profits, CT_MAIN, mainCharge]);
      steps.push(["Marginal Relief",-1, -MR]);
    }
    let total = steps.reduce((s,x)=>s+(typeof x[2]==="number"?x[2]:0),0);
    addBreakdown(key,"Corporation Tax",steps);
    return total;
  }

  // Self-employed
  let seANI = profits + otherEarned;
  let sePA = taperedPA(seANI);
  let seIncomeTax = taxOnNSND(seANI, sePA, "seIncomeTax", "Self-employed Income Tax");
  let seC4 = class4NI(profits, "seC4");
  let seTotal = seIncomeTax + seC4;
  let seTake = profits + otherEarned - seTotal;

  // Ltd Co (salary fixed at £12,570)
  const salary = 12570;
  let erBill = erNI(salary,"erNI");
  let erAfterEA = Math.max(0, erBill - (eaAvailable ? EA_CAP : 0));
  let ctProfit = profits - salary - erAfterEA;
  let ctBill = corpTax(ctProfit,"ct");
  let postCT = ctProfit - ctBill;
  let payeBill = taxOnNSND(salary + otherEarned, taperedPA(salary+otherEarned), "paye","PAYE");
  let eeBill = eeNI(salary,"eeNI");
  let divTaxBill = taxOnDivs(postCT + otherDivs, Math.max(0,salary+otherEarned - taperedPA(salary+otherEarned)), "divTax", "Dividend Tax");
  let coTotal = erBill + ctBill + payeBill + eeBill + divTaxBill;
  let coTake = salary - payeBill - eeBill + postCT - divTaxBill + otherEarned + otherDivs;

  // Update UI
  document.getElementById("seTax").textContent = fmtGBP(seTotal);
  document.getElementById("coTax").textContent = fmtGBP(coTotal);
  document.getElementById("diff").textContent = fmtGBP(coTake - seTake);
  document.getElementById("whichBetter").textContent = coTake>seTake?"Ltd Co better":"Self-employed better";
  document.getElementById("seTotalTax").textContent = fmtGBP(seTotal);
  document.getElementById("seTakeHome").textContent = fmtGBP(seTake);
  document.getElementById("coTotalTax").textContent = fmtGBP(coTotal);
  document.getElementById("coTakeHome").textContent = fmtGBP(coTake);

  // Fill breakdown tables
  document.getElementById("seRows").innerHTML = `
    <tr><td>Income Tax</td><td class="danger clickable" data-key="seIncomeTax">${fmtGBP(seIncomeTax)}</td></tr>
    <tr><td>Class 4 NI</td><td class="danger clickable" data-key="seC4">${fmtGBP(seC4)}</td></tr>`;
  document.getElementById("coRows").innerHTML = `
    <tr><td>Employer NI</td><td class="danger clickable" data-key="erNI">${fmtGBP(erBill)}</td></tr>
    <tr><td>Corporation Tax</td><td class="danger clickable" data-key="ct">${fmtGBP(ctBill)}</td></tr>
    <tr><td>PAYE</td><td class="danger clickable" data-key="paye">${fmtGBP(payeBill)}</td></tr>
    <tr><td>Employee NI</td><td class="danger clickable" data-key="eeNI">${fmtGBP(eeBill)}</td></tr>
    <tr><td>Dividend Tax</td><td class="danger clickable" data-key="divTax">${fmtGBP(divTaxBill)}</td></tr>`;
}

document.addEventListener("input",calc);
document.addEventListener("DOMContentLoaded",calc);

// Modal
document.addEventListener("click",function(e){
  if (e.target.classList.contains("clickable")){
    let key = e.target.dataset.key;
    let data = breakdowns[key];
    let tbl = document.getElementById("modalTable");
    let html="";
    data.steps.forEach(s=>{
      if (s[1]===-1){ html += `<tr><td>${s[0]}</td><td></td><td>${fmtGBP(s[2])}</td></tr>`; }
      else { html += `<tr><td>${fmtGBP(s[0])}</td><td>${(s[1]*100).toFixed(0)}%</td><td>${fmtGBP(s[2])}</td></tr>`; }
    });
    html += `<tr><td colspan="2"><strong>Total</strong></td><td><strong>${fmtGBP(data.steps.reduce((sum,s)=>sum+(typeof s[2]==="number"?s[2]:0),0))}</strong></td></tr>`;
    tbl.innerHTML = html;
    document.getElementById("modalTitle").textContent = data.title;
    document.getElementById("modal").style.display = "flex";
  }
});
document.getElementById("modalClose").addEventListener("click",()=>document.getElementById("modal").style.display="none");
</script>
</body>
</html>
